<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Store</title>
  <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
</head>

<body>
  <script>
    // const getUserAgent = () => {
    //   const userAgent = navigator.userAgent;

    //   const android = 'https://play.google.com/store/apps/details?id=ch.noury';
    //   const apple = 'https://apps.apple.com/ch/app/noury/id1577361582';
    //   const web = 'https://www.noury.ch/app-herunterladen';

    //   if (/Android/i.test(userAgent)) {
    //     try { window.location.replace('scan://home') } catch (err) { console.log(err) }
    //     window.location.replace(android);
    //   } else if (/iPhone|iPad|iPod/i.test(userAgent)) {
    //     try { window.location.replace('scan://') } catch (err) { console.log(err) }
    //     window.location.replace(apple);
    //   } else {
    //     window.location.replace(web);
    //   }
    // }
    // document.addEventListener('DOMContentLoaded', getUserAgent);

    const getUserAgent = () => {
    const userAgent = navigator.userAgent;

    // Check if the custom URL scheme exists
    const supportsCustomURLScheme =!!window.matchMedia(`url(${encodeURIComponent('scan://')}):after`).matches;

    let url;
    if (supportsCustomURLScheme) {
      // If the custom URL scheme exists, try to open the app using it
      try {
        window.location.replace('scan://tabnav/home/cabinet_id=if-28-4-2022-977631');
      } catch (err) {
        console.log('Cannot navigate to the app using the custom URL scheme.');
      }
    }

    // Fallback to existing logic for non-supporting devices
    if (/Android/i.test(userAgent)) {
      url = 'https://play.google.com/store/apps/details?id=ch.noury';
    } else if (/iPhone|iPad|iPod/i.test(userAgent)) {
      url = 'https://apps.apple.com/ch/app/noury/id1577361582';
    } else {
      url = 'https://www.noury.ch/app-herunterladen';
    }

    // Redirect to the appropriate location
    window.location.replace(url);
  };
  document.addEventListener('DOMContentLoaded', getUserAgent);
  </script>
</body>

</html>
