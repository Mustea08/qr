<!-- <!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Store</title>
  <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
</head>

<body>
  <script>
    // const getUserAgent = () => {
    //   const userAgent = navigator.userAgent;

    //   const android = 'https://play.google.com/store/apps/details?id=ch.noury';
    //   const apple = 'https://apps.apple.com/ch/app/noury/id1577361582';
    //   const web = 'https://www.noury.ch/app-herunterladen';

    //   if (/Android/i.test(userAgent)) {
    //     try { window.location.replace('scan://home') } catch (err) { console.log(err) }
    //     window.location.replace(android);
    //   } else if (/iPhone|iPad|iPod/i.test(userAgent)) {
    //     try { window.location.replace('scan://') } catch (err) { console.log(err) }
    //     window.location.replace(apple);
    //   } else {
    //     window.location.replace(web);
    //   }
    // }
    // document.addEventListener('DOMContentLoaded', getUserAgent);

    const getUserAgent = () => {
    const userAgent = navigator.userAgent;

    // Check if the custom URL scheme exists
    const supportsCustomURLScheme =!!window.matchMedia(`url(${encodeURIComponent('scan://')}):after`).matches;

    let url;
    if (supportsCustomURLScheme) {
      // If the custom URL scheme exists, try to open the app using it
      try {
        window.location.replace('scan://tabnav/home/cabinet_id=if-28-4-2022-977631');
      } catch (err) {
        console.log('Cannot navigate to the app using the custom URL scheme.');
      }
    }

    // Fallback to existing logic for non-supporting devices
    if (/Android/i.test(userAgent)) {
      url = 'https://play.google.com/store/apps/details?id=ch.noury';
    } else if (/iPhone|iPad|iPod/i.test(userAgent)) {
      url = 'https://apps.apple.com/ch/app/noury/id1577361582';
    } else {
      url = 'https://www.noury.ch/app-herunterladen';
    }

    // Redirect to the appropriate location
    window.location.replace(url);
  };
  document.addEventListener('DOMContentLoaded', getUserAgent);
  </script>
</body>

</html>
 -->

 <html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Redirect</title>
    <script>
         <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Define the custom URL scheme and URLs
      var appScheme = "scan://tabnav/home/open_with_deep_link/cabinet_id=1234"; // Replace with your app's custom URL scheme
      var playStoreURL = "https://play.google.com/store/apps/details?id=ch.noury"; // Replace with your Android app's Play Store URL
      var appStoreURL = "https://apps.apple.com/ch/app/noury/id1577361582"; // Replace with your iOS app's App Store URL
      var websiteURL = "https://www.noury.ch/app-herunterladen"; // Replace with your website URL

      function isMobile() {
        var userAgent = navigator.userAgent || navigator.vendor || window.opera;
        return (/android/i.test(userAgent) || /iPad|iPhone|iPod/.test(userAgent)) && !window.MSStream;
      }

      function isAndroid() {
        return /android/i.test(navigator.userAgent);
      }

      function isIOS() {
        return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
      }

      function redirectToApp() {
        var now = Date.now();

        // After 2 seconds, if the app hasn't opened, redirect to the app store
        setTimeout(function () {
          setTimeout(function () {
            // If the time hasn't changed much, it means the app wasn't opened
            if (Date.now() - now < 1500) {
              if (isAndroid()) {
                window.location = playStoreURL;
              } else if (isIOS()) {
                window.location = appStoreURL;
              } else {
                window.location = websiteURL;
              }
            }
          }, 1300);

          // Try to open the app
          window.location = appScheme;
        })
      }

      // Redirect to the app or appropriate store/website
      if (isAndroid() || isIOS()) {
        redirectToApp();
      } else {
        window.location = websiteURL;
      }
    });
  </script>
    </script>
</head>
<body>
</body>
</html>
